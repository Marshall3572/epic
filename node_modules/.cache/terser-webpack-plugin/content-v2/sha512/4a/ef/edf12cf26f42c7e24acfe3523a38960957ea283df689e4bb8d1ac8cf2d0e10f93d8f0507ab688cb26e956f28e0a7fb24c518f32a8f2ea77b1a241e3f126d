{"code":"(this[\"webpackJsonpepic-react\"]=this[\"webpackJsonpepic-react\"]||[]).push([[11],{263:function(e,s,r){\"use strict\";r.r(s);var a,n,t=r(33),i=r(267),o=r(268),c=r(126),l=(r(0),r(34)),p=r(80),d=r(12),m=r(5),u=l.a.div(a||(a=Object(t.a)([\"\\n  max-width: 600px;\\n  margin: 30px auto;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\\n  border-radius: 4px;\\n  padding: 20px;\\n\"],[\"\\n  max-width: 600px;\\n  margin: 30px auto;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2\\\\);\\n  border-radius: 4px;\\n  padding: 20px;\\n\"]))),x=l.a.h1(n||(n=Object(t.a)([\"\\n  text-align: center;\\n  margin-bottom: 30px;\\n\"])));s.default=function(){var e=Object(p.a)().AuthStore,s=Object(d.f)();return Object(m.jsxs)(u,{children:[Object(m.jsx)(x,{children:\"\\u6ce8\\u518c\"}),Object(m.jsxs)(i.a,{name:\"basic\",labelCol:{span:6},wrapperCol:{span:18},initialValues:{remember:!0},onFinish:function(r){console.log(\"Success:\",r),e.setUsername(r.username),e.setPassword(r.password),e.register().then((function(){console.log(\"\\u6ce8\\u518c\\u6210\\u529f, \\u8df3\\u8f6c\\u5230\\u9996\\u9875\"),s.push(\"/\")})).catch((function(){console.log(\"\\u6ce8\\u518c\\u5931\\u8d25\\uff0c\\u4ec0\\u4e48\\u90fd\\u4e0d\\u505a\")}))},onFinishFailed:function(e){console.log(\"Failed:\",e)},children:[Object(m.jsx)(i.a.Item,{label:\"\\u7528\\u6237\\u540d\",name:\"username\",rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u7528\\u6237\\u540d\"},{validator:function(e,s){return/\\W/.test(s)?Promise.reject(\"\\u4e0d\\u80fd\\u51fa\\u73b0\\u5b57\\u6bcd\\u6570\\u5b57\\u4e0b\\u5212\\u7ebf\\u4ee5\\u5916\\u7684\\u5b57\\u7b26\"):s.length<3?Promise.reject(\"\\u7528\\u6237\\u540d\\u957f\\u5ea6\\u4e0d\\u80fd\\u5c0f\\u4e8e3\"):s.length>10?Promise.reject(\"\\u7528\\u6237\\u540d\\u957f\\u5ea6\\u4e0d\\u80fd\\u5927\\u4e8e10\"):Promise.resolve()}}],children:Object(m.jsx)(o.a,{})}),Object(m.jsx)(i.a.Item,{label:\"\\u5bc6\\u7801\",name:\"password\",rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u5bc6\\u7801\"},{min:4,message:\"\\u5bc6\\u7801\\u6700\\u5c114\\u4f4d\\u6570\"},{max:10,message:\"\\u5bc6\\u7801\\u6700\\u591a\\u5341\\u4f4d\\u6570\"}],children:Object(m.jsx)(o.a.Password,{})}),Object(m.jsx)(i.a.Item,{label:\"\\u786e\\u8ba4\\u5bc6\\u7801\",name:\"confirmPassword\",rules:[{required:!0,message:\"\\u8bf7\\u518d\\u6b21\\u786e\\u8ba4\\u5bc6\\u7801\"},function(e){var s=e.getFieldValue;return{validator:function(e,r){return s(\"password\")===r?Promise.resolve():Promise.reject(\"\\u4e24\\u6b21\\u5bc6\\u7801\\u4e0d\\u4e00\\u81f4\")}}}],children:Object(m.jsx)(o.a.Password,{})}),Object(m.jsx)(i.a.Item,{wrapperCol:{offset:6,span:18},children:Object(m.jsx)(c.a,{type:\"primary\",htmlType:\"submit\",children:\"\\u63d0\\u4ea4\"})})]})]})}}}]);","name":"static/js/11.a6d970ea.chunk.js","map":{"version":3,"sources":["static/js/11.a6d970ea.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","_templateObject","_templateObject2","_Users_marshall_Desktop_epic_react_epic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__","antd__WEBPACK_IMPORTED_MODULE_1__","antd__WEBPACK_IMPORTED_MODULE_2__","antd__WEBPACK_IMPORTED_MODULE_3__","styled_components__WEBPACK_IMPORTED_MODULE_5__","_stores__WEBPACK_IMPORTED_MODULE_6__","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__","Wrapper","div","Object","Title","h1","AuthStore","history","children","name","labelCol","span","wrapperCol","initialValues","remember","onFinish","values","console","log","setUsername","username","setPassword","password","register","then","catch","onFinishFailed","errorInfo","Item","label","rules","required","message","validator","rule","value","test","Promise","reject","length","resolve","min","max","Password","_ref","getFieldValue","offset","type","htmlType"],"mappings":"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"},"input":"(this[\"webpackJsonpepic-react\"] = this[\"webpackJsonpepic-react\"] || []).push([[11],{\n\n/***/ 263:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Users_marshall_Desktop_epic_react_epic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(33);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(267);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(268);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(126);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(34);\n/* harmony import */ var _stores__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(12);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(5);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);\nvar _templateObject,_templateObject2;var Wrapper=styled_components__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].div(_templateObject||(_templateObject=Object(_Users_marshall_Desktop_epic_react_epic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n  max-width: 600px;\\n  margin: 30px auto;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\\n  border-radius: 4px;\\n  padding: 20px;\\n\"],[\"\\n  max-width: 600px;\\n  margin: 30px auto;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2\\\\);\\n  border-radius: 4px;\\n  padding: 20px;\\n\"])));var Title=styled_components__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].h1(_templateObject2||(_templateObject2=Object(_Users_marshall_Desktop_epic_react_epic_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n  text-align: center;\\n  margin-bottom: 30px;\\n\"])));var Component=function Component(){var _useStores=Object(_stores__WEBPACK_IMPORTED_MODULE_6__[/* useStores */ \"a\"])(),AuthStore=_useStores.AuthStore;var history=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_7__[/* useHistory */ \"f\"])();var onFinish=function onFinish(values){console.log('Success:',values);AuthStore.setUsername(values.username);AuthStore.setPassword(values.password);AuthStore.register().then(function(){console.log('注册成功, 跳转到首页');history.push('/');}).catch(function(){console.log('注册失败，什么都不做');});};var onFinishFailed=function onFinishFailed(errorInfo){console.log('Failed:',errorInfo);};var validateUsername=function validateUsername(rule,value){if(/\\W/.test(value))return Promise.reject('不能出现字母数字下划线以外的字符');if(value.length<3)return Promise.reject('用户名长度不能小于3');if(value.length>10)return Promise.reject('用户名长度不能大于10');return Promise.resolve();};// 箭头函数后加()是因为返回了一个对象，不加会被理解为函数体\nvar validateConform=function validateConform(_ref){var getFieldValue=_ref.getFieldValue;return{validator:function validator(rule,value){if(getFieldValue('password')===value)return Promise.resolve();return Promise.reject('两次密码不一致');}};};return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsxs\"])(Wrapper,{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(Title,{children:\"\\u6CE8\\u518C\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsxs\"])(antd__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"],{name:\"basic\",labelCol:{span:6},wrapperCol:{span:18},initialValues:{remember:true},onFinish:onFinish,onFinishFailed:onFinishFailed,children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].Item,{label:\"\\u7528\\u6237\\u540D\",name:\"username\",rules:[{required:true,message:'请输入用户名'},{validator:validateUsername}],children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"],{})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].Item,{label:\"\\u5BC6\\u7801\",name:\"password\",rules:[{required:true,message:'请输入密码'},{min:4,message:'密码最少4位数'},{max:10,message:'密码最多十位数'}],children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].Password,{})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].Item,{label:\"\\u786E\\u8BA4\\u5BC6\\u7801\",name:\"confirmPassword\",rules:[{required:true,message:'请再次确认密码'},validateConform],children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].Password,{})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].Item,{wrapperCol:{offset:6,span:18},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{type:\"primary\",htmlType:\"submit\",children:\"\\u63D0\\u4EA4\"})})]})]});};/* harmony default export */ __webpack_exports__[\"default\"] = (Component);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/marshall/Desktop/epic-react/epic/src/pages/Register.js"],"names":["Wrapper","styled","div","Title","h1","Component","useStores","AuthStore","history","useHistory","onFinish","values","console","log","setUsername","username","setPassword","password","register","then","push","catch","onFinishFailed","errorInfo","validateUsername","rule","value","test","Promise","reject","length","resolve","validateConform","getFieldValue","validator","span","remember","required","message","min","max","offset"],"mappings":"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","file":"x","sourcesContent":["import {Form, Input, Button} from 'antd'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {useStores} from '../stores'\nimport {useHistory} from 'react-router-dom'\n\nconst Wrapper = styled.div`\n  max-width: 600px;\n  margin: 30px auto;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2\\);\n  border-radius: 4px;\n  padding: 20px;\n`\nconst Title = styled.h1`\n  text-align: center;\n  margin-bottom: 30px;\n`\n\nconst Component = () => {\n\n  const { AuthStore } = useStores();\n  const history = useHistory()\n\n  const onFinish = values => {\n    console.log('Success:', values);\n    AuthStore.setUsername(values.username);\n    AuthStore.setPassword(values.password);\n    AuthStore.register()\n      .then(() => {\n        console.log('注册成功, 跳转到首页')\n        history.push('/')\n      }).catch(() => {\n      console.log('注册失败，什么都不做')\n    });\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo)\n  }\n\n  const validateUsername = (rule, value) => {\n    if (/\\W/.test(value)) return Promise.reject('不能出现字母数字下划线以外的字符')\n    if (value.length < 3) return Promise.reject('用户名长度不能小于3')\n    if (value.length > 10) return Promise.reject('用户名长度不能大于10')\n    return Promise.resolve();\n  }\n\n  // 箭头函数后加()是因为返回了一个对象，不加会被理解为函数体\n  const validateConform = ({getFieldValue}) => ({\n    validator(rule, value) {\n      if (getFieldValue('password') === value)\n        return Promise.resolve()\n      return Promise.reject('两次密码不一致')\n    }\n  })\n\n  return (\n    <Wrapper>\n      <Title>注册</Title>\n      <Form\n        name=\"basic\"\n        labelCol={{\n          span: 6,\n        }}\n        wrapperCol={{\n          span: 18,\n        }}\n        initialValues={{\n          remember: true,\n        }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n      >\n        <Form.Item\n          label=\"用户名\"\n          name=\"username\"\n          rules={[\n            {\n              required: true,\n              message: '请输入用户名',\n            }, {\n              validator: validateUsername\n            }\n          ]}\n        >\n          <Input/>\n        </Form.Item>\n        <Form.Item\n          label=\"密码\"\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: '请输入密码',\n            }, {\n              min: 4,\n              message: '密码最少4位数'\n            }, {\n              max: 10,\n              message: '密码最多十位数'\n            }\n          ]}\n        >\n          <Input.Password/>\n        </Form.Item>\n\n        <Form.Item\n          label=\"确认密码\"\n          name=\"confirmPassword\"\n          rules={[\n            {\n              required: true,\n              message: '请再次确认密码',\n            },\n            validateConform\n          ]}\n        >\n          <Input.Password/>\n        </Form.Item>\n\n        <Form.Item\n          wrapperCol={{\n            offset: 6,\n            span: 18,\n          }}\n        >\n          <Button type=\"primary\" htmlType=\"submit\">\n            提交\n          </Button>\n        </Form.Item>\n      </Form>\n    </Wrapper>\n  )\n}\n\nexport default Component"]}}