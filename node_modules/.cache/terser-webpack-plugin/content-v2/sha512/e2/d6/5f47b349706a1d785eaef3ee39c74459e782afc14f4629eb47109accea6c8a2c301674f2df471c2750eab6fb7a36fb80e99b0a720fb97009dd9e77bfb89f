{"code":"(this[\"webpackJsonpepic-react\"]=this[\"webpackJsonpepic-react\"]||[]).push([[9],{269:function(e,t,r){\"use strict\";r.r(t);var n,c,i,s,a=r(0),l=r(83),j=r(80),d=r(162),h=r(33),u=r(18),b=r(271),g=r(265),o=r(76),O=r(169),p=r(34),x=(r(52),r(5)),f=g.a.Dragger,v=p.a.div(n||(n=Object(h.a)([\"\\n  margin-top: 30px;\\n  border: 1px dashed #ccc;\\n  padding: 20px;\\n\"]))),m=p.a.h1(c||(c=Object(h.a)([\"\\n  margin: 20px 0;\\n  text-align: center;\\n\"]))),w=p.a.img(i||(i=Object(h.a)([\"\\n  max-width: 300px;\\n\"]))),S=Object(l.a)((function(){var e=Object(j.a)(),t=e.ImageStore,r=e.UserStore,n=Object(a.useRef)(),c=Object(a.useRef)(),i=Object(u.d)((function(){return{width:null,height:null,get widthStr(){return i.width?\"/w/\".concat(i.width):\"\"},get heightStr(){return i.height?\"/h/\".concat(i.height):\"\"},get fullStr(){return t.serverFile.attributes.url.attributes.url+\"?imageView2/0\"+i.widthStr+i.heightStr},setHeight:function(e){i.height=e},setWidth:function(e){i.width=e}}})),s={showUploadList:!1,beforeUpload:function(e){return t.setFile(e),t.setFilename(e.name),null==r.currentUser?(o.b.warning(\"\\u8bf7\\u5148\\u767b\\u9646\\u518d\\u4e0a\\u4f20\"),!1):(window.file=e,/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/gi.test(e.type)?e.size>1048576?(o.b.error(\"\\u6700\\u5927\\u4e0a\\u4f201M\\u56fe\\u7247\"),!1):(t.upload().then((function(e){console.log(\"\\u4e0a\\u4f20\\u6210\\u529f\")})).catch((function(){return console.log(\"\\u4e0a\\u4f20\\u5931\\u8d25\")})),!1):(o.b.error(\"\\u53ea\\u80fd\\u4e0a\\u4f20.png/.gif/.jpg/.svg\\u683c\\u5f0f\\u7684\\u56fe\\u7247\"),!1))}};return Object(x.jsxs)(\"div\",{children:[Object(x.jsx)(O.a,{tip:\"\\u4e0a\\u4f20\\u4e2d\",spinning:t.isUploading,children:Object(x.jsxs)(f,Object(d.a)(Object(d.a)({},s),{},{children:[Object(x.jsx)(\"p\",{className:\"ant-upload-drag-icon\",children:Object(x.jsx)(b.a,{})}),Object(x.jsx)(\"p\",{className:\"ant-upload-text\",children:\"\\u70b9\\u51fb\\u6216\\u8005\\u62d6\\u62fd\\u4e0a\\u4f20\\u56fe\\u7247\"}),Object(x.jsx)(\"p\",{className:\"ant-upload-hint\",children:\"\\u4ec5\\u652f\\u6301.png/.gif/.jpg/.svg\\u683c\\u5f0f\\u7684\\u56fe\\u7247\\uff0c\\u56fe\\u7247\\u6700\\u59271M\"})]}))}),t.serverFile?Object(x.jsxs)(v,{children:[Object(x.jsx)(m,{children:\"\\u4e0a\\u4f20\\u7ed3\\u679c\"}),Object(x.jsxs)(\"dl\",{children:[Object(x.jsx)(\"dt\",{children:\"\\u7ebf\\u4e0a\\u5730\\u5740\"}),Object(x.jsx)(\"dd\",{children:Object(x.jsx)(\"a\",{target:\"_blank\",href:t.serverFile.attributes.url.attributes.url,children:t.serverFile.attributes.url.attributes.url})}),Object(x.jsx)(\"dt\",{children:\"\\u6587\\u4ef6\\u540d\"}),Object(x.jsx)(\"dd\",{children:t.filename}),Object(x.jsx)(\"dt\",{children:\"\\u56fe\\u7247\\u9884\\u89c8\"}),Object(x.jsx)(\"dd\",{children:Object(x.jsx)(w,{src:t.serverFile.attributes.url.attributes.url})}),Object(x.jsx)(\"dt\",{children:\"\\u66f4\\u591a\\u5c3a\\u5bf8\"}),Object(x.jsxs)(\"dd\",{children:[Object(x.jsx)(\"input\",{ref:n,onChange:function(){i.setWidth(n.current.value)},placeholder:\"\\u6700\\u5927\\u5bbd\\u5ea6\\uff08\\u53ef\\u9009\\uff09\"}),Object(x.jsx)(\"input\",{ref:c,onChange:function(){i.setHeight(c.current.value)},placeholder:\"\\u6700\\u5927\\u9ad8\\u5ea6\\uff08\\u53ef\\u9009\\uff09\"})]}),Object(x.jsx)(\"dd\",{children:Object(x.jsx)(\"a\",{target:\"_blank\",href:i.fullStr,children:i.fullStr})})]})]}):null]})})),F=p.a.div(s||(s=Object(h.a)([\"\\n  background: orange;\\n  color: #fff;\\n  border-radius: 4px;\\n  padding: 10px;\\n  margin: 30px 0;\\n  \\n\"]))),U=Object(l.a)((function(e){var t=e.children,r=Object(j.a)().UserStore;return Object(x.jsx)(x.Fragment,{children:r.currentUser?null:Object(x.jsx)(F,{children:t})})}));t.default=Object(l.a)((function(){Object(j.a)().UserStore;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(U,{children:\"\\u8bf7\\u5148\\u767b\\u9646\\u5728\\u4e0a\\u4f20\"}),Object(x.jsx)(S,{})]})}))}}]);","name":"static/js/9.7ee6c9c5.chunk.js","map":{"version":3,"sources":["static/js/9.7ee6c9c5.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","_templateObject","_templateObject2","_templateObject3","Tips_templateObject","react","mobxreact_esm","stores","objectSpread2","taggedTemplateLiteral","es","InboxOutlined","upload","message","spin","styled_components_browser_esm","jsx_runtime","Dragger","Result","div","Object","H1","h1","Image","img","Uploader","_useStores","ImageStore","UserStore","ref1","ref2","store","width","height","widthStr","concat","heightStr","fullStr","serverFile","attributes","url","setHeight","setWidth","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","warning","window","test","type","size","error","then","console","log","catch","children","tip","spinning","isUploading","className","target","href","filename","src","ref","onChange","current","value","placeholder","Tips","components_Tips","_ref"],"mappings":"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"},"input":"(this[\"webpackJsonpepic-react\"] = this[\"webpackJsonpepic-react\"] || []).push([[9],{\n\n/***/ 269:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/mobx-react/dist/mobxreact.esm.js\nvar mobxreact_esm = __webpack_require__(83);\n\n// EXTERNAL MODULE: ./src/stores/index.js + 3 modules\nvar stores = __webpack_require__(80);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(162);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\nvar taggedTemplateLiteral = __webpack_require__(33);\n\n// EXTERNAL MODULE: ./node_modules/mobx-react-lite/es/index.js + 17 modules\nvar es = __webpack_require__(18);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/InboxOutlined.js + 1 modules\nvar InboxOutlined = __webpack_require__(271);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/upload/index.js + 32 modules\nvar upload = __webpack_require__(265);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 3 modules\nvar message = __webpack_require__(76);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/spin/index.js\nvar spin = __webpack_require__(169);\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(34);\n\n// EXTERNAL MODULE: ./src/stores/image.js\nvar stores_image = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(5);\n\n// CONCATENATED MODULE: ./src/components/Uploader.js\nvar _templateObject,_templateObject2,_templateObject3;var Dragger=upload[\"a\" /* default */].Dragger;var Result=styled_components_browser_esm[\"a\" /* default */].div(_templateObject||(_templateObject=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  margin-top: 30px;\\n  border: 1px dashed #ccc;\\n  padding: 20px;\\n\"])));var H1=styled_components_browser_esm[\"a\" /* default */].h1(_templateObject2||(_templateObject2=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  margin: 20px 0;\\n  text-align: center;\\n\"])));var Image=styled_components_browser_esm[\"a\" /* default */].img(_templateObject3||(_templateObject3=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  max-width: 300px;\\n\"])));var Component=Object(mobxreact_esm[\"a\" /* observer */])(function(){var _useStores=Object(stores[\"a\" /* useStores */])(),ImageStore=_useStores.ImageStore,UserStore=_useStores.UserStore;var ref1=Object(react[\"useRef\"])(),ref2=Object(react[\"useRef\"])();// 返回值要加个括号，不然会被理解为函数体\nvar store=Object(es[\"d\" /* useLocalStore */])(function(){return{width:null,height:null,get widthStr(){return store.width?\"/w/\".concat(store.width):'';},get heightStr(){return store.height?\"/h/\".concat(store.height):'';},get fullStr(){return ImageStore.serverFile.attributes.url.attributes.url+'?imageView2/0'+store.widthStr+store.heightStr;},setHeight:function setHeight(height){store.height=height;},setWidth:function setWidth(width){store.width=width;}};});var bindWidthChange=function bindWidthChange(){store.setWidth(ref1.current.value);};var bindHeightChange=function bindHeightChange(){store.setHeight(ref2.current.value);};var props={showUploadList:false,beforeUpload:function beforeUpload(file){ImageStore.setFile(file);ImageStore.setFilename(file.name);if(UserStore.currentUser==null){message[\"b\" /* default */].warning('请先登陆再上传');return false;}// 可以在控制台看到文件的api\nwindow.file=file;// .ig是指忽略大小写\nif(!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)){message[\"b\" /* default */].error('只能上传.png/.gif/.jpg/.svg格式的图片');return false;}if(file.size>1024*1024){message[\"b\" /* default */].error('最大上传1M图片');return false;}ImageStore.upload().then(function(serverFile){console.log('上传成功');}).catch(function(){return console.log('上传失败');});return false;}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(spin[\"a\" /* default */],{tip:\"\\u4E0A\\u4F20\\u4E2D\",spinning:ImageStore.isUploading,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Dragger,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"ant-upload-drag-icon\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InboxOutlined[\"a\" /* default */],{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"ant-upload-text\",children:\"\\u70B9\\u51FB\\u6216\\u8005\\u62D6\\u62FD\\u4E0A\\u4F20\\u56FE\\u7247\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"ant-upload-hint\",children:\"\\u4EC5\\u652F\\u6301.png/.gif/.jpg/.svg\\u683C\\u5F0F\\u7684\\u56FE\\u7247\\uFF0C\\u56FE\\u7247\\u6700\\u59271M\"})]}))}),ImageStore.serverFile?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Result,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(H1,{children:\"\\u4E0A\\u4F20\\u7ED3\\u679C\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"dl\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"dt\",{children:\"\\u7EBF\\u4E0A\\u5730\\u5740\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"dd\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{target:\"_blank\",href:ImageStore.serverFile.attributes.url.attributes.url,children:ImageStore.serverFile.attributes.url.attributes.url})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"dt\",{children:\"\\u6587\\u4EF6\\u540D\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"dd\",{children:ImageStore.filename}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"dt\",{children:\"\\u56FE\\u7247\\u9884\\u89C8\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"dd\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Image,{src:ImageStore.serverFile.attributes.url.attributes.url})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"dt\",{children:\"\\u66F4\\u591A\\u5C3A\\u5BF8\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"dd\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{ref:ref1,onChange:bindWidthChange,placeholder:\"\\u6700\\u5927\\u5BBD\\u5EA6\\uFF08\\u53EF\\u9009\\uFF09\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{ref:ref2,onChange:bindHeightChange,placeholder:\"\\u6700\\u5927\\u9AD8\\u5EA6\\uFF08\\u53EF\\u9009\\uFF09\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"dd\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{target:\"_blank\",href:store.fullStr,children:store.fullStr})})]})]}):null]});});/* harmony default export */ var Uploader = (Component);\n// CONCATENATED MODULE: ./src/components/Tips.js\nvar Tips_templateObject;var Tips=styled_components_browser_esm[\"a\" /* default */].div(Tips_templateObject||(Tips_templateObject=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  background: orange;\\n  color: #fff;\\n  border-radius: 4px;\\n  padding: 10px;\\n  margin: 30px 0;\\n  \\n\"])));/* harmony default export */ var components_Tips = (Object(mobxreact_esm[\"a\" /* observer */])(function(_ref){var children=_ref.children;// eslint-disable-next-line no-unused-vars\nvar _useStores=Object(stores[\"a\" /* useStores */])(),UserStore=_useStores.UserStore;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:UserStore.currentUser?null:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Tips,{children:children})});}));\n// CONCATENATED MODULE: ./src/pages/Home.js\n/* harmony default export */ var Home = __webpack_exports__[\"default\"] = (Object(mobxreact_esm[\"a\" /* observer */])(function(){var _useStores=Object(stores[\"a\" /* useStores */])(),UserStore=_useStores.UserStore;var User=function User(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[\"Hello~\",UserStore.currentUser.attributes.username]});};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Tips,{children:\"\\u8BF7\\u5148\\u767B\\u9646\\u5728\\u4E0A\\u4F20\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Uploader,{})]});}));\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/marshall/Desktop/epic-react/epic/src/components/Uploader.js","/Users/marshall/Desktop/epic-react/epic/src/components/Tips.js","/Users/marshall/Desktop/epic-react/epic/src/pages/Home.js"],"names":["Dragger","Upload","Result","styled","div","H1","h1","Image","img","Component","observer","useStores","ImageStore","UserStore","ref1","useRef","ref2","store","useLocalStore","width","height","widthStr","heightStr","fullStr","serverFile","attributes","url","setHeight","setWidth","bindWidthChange","current","value","bindHeightChange","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","message","warning","window","test","type","error","size","upload","then","console","log","catch","isUploading","filename","Tips","children","User","username"],"mappings":"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","file":"x","sourcesContent":["import React, {useRef} from 'react'\nimport {useStores} from '../stores'\nimport {observer, useLocalStore} from 'mobx-react'\nimport {InboxOutlined} from '@ant-design/icons'\nimport {Upload, message, Spin} from 'antd'\nimport styled from 'styled-components'\nimport image from '../stores/image'\n\nconst {Dragger} = Upload\n\nconst Result = styled.div`\n  margin-top: 30px;\n  border: 1px dashed #ccc;\n  padding: 20px;\n`\nconst H1 = styled.h1`\n  margin: 20px 0;\n  text-align: center;\n`\nconst Image = styled.img`\n  max-width: 300px;\n`\n\n\nconst Component = observer(() => {\n    const {ImageStore, UserStore} = useStores()\n    const ref1 = useRef(), ref2 = useRef()\n    // 返回值要加个括号，不然会被理解为函数体\n    const store = useLocalStore(() => ({\n      width: null,\n      height: null,\n      get widthStr() {\n        return store.width ? `/w/${store.width}` : ''\n      },\n      get heightStr() {\n        return store.height ? `/h/${store.height}` : ''\n      },\n      get fullStr() {\n        return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\n      },\n      setHeight(height) {\n        store.height = height\n      },\n      setWidth(width) {\n        store.width = width\n      },\n    }))\n\n    const bindWidthChange = () => {\n      store.setWidth(ref1.current.value)\n    }\n    const bindHeightChange = () => {\n      store.setHeight(ref2.current.value)\n    }\n    const props = {\n      showUploadList: false,\n      beforeUpload: file => {\n        ImageStore.setFile(file)\n        ImageStore.setFilename(file.name)\n        if (UserStore.currentUser == null) {\n          message.warning('请先登陆再上传')\n          return false\n        }\n        // 可以在控制台看到文件的api\n        window.file = file\n\n        // .ig是指忽略大小写\n        if (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)) {\n          message.error('只能上传.png/.gif/.jpg/.svg格式的图片')\n          return false\n        }\n        if (file.size > 1024 * 1024) {\n          message.error('最大上传1M图片')\n          return false\n        }\n        ImageStore.upload()\n          .then((serverFile) => {\n              console.log('上传成功')\n            }\n          ).catch(() => console.log('上传失败'))\n        return false\n      }\n    }\n\n    return (\n      <div>\n        <Spin tip='上传中' spinning={ImageStore.isUploading}>\n          <Dragger {...props}>\n            <p className=\"ant-upload-drag-icon\">\n              <InboxOutlined/>\n            </p>\n            <p className=\"ant-upload-text\">点击或者拖拽上传图片</p>\n            <p className=\"ant-upload-hint\">\n              仅支持.png/.gif/.jpg/.svg格式的图片，图片最大1M\n            </p>\n          </Dragger>\n        </Spin>\n        {\n          ImageStore.serverFile ?\n            <Result>\n              <H1>上传结果</H1>\n              <dl>\n                <dt>线上地址</dt>\n                <dd><a target=\"_blank\"\n                       href={ImageStore.serverFile.attributes.url.attributes.url}>{ImageStore.serverFile.attributes.url.attributes.url}</a>\n                </dd>\n                <dt>文件名</dt>\n                <dd>{ImageStore.filename}</dd>\n                <dt>图片预览</dt>\n                <dd>\n                  <Image src={ImageStore.serverFile.attributes.url.attributes.url}/>\n                </dd>\n                <dt>更多尺寸</dt>\n                <dd>\n                  <input ref={ref1} onChange={bindWidthChange} placeholder=\"最大宽度（可选）\"/>\n                  <input ref={ref2} onChange={bindHeightChange} placeholder=\"最大高度（可选）\"/>\n                </dd>\n                <dd>\n                  <a target=\"_blank\" href={store.fullStr}>{store.fullStr}</a>\n                </dd>\n              </dl>\n            </Result> : null\n        }\n      </div>\n    )\n  }\n)\n\nexport default Component","import React from 'react'\nimport {useStores} from '../stores/index'\nimport {observer} from 'mobx-react'\nimport styled from 'styled-components'\n\nconst Tips = styled.div`\n  background: orange;\n  color: #fff;\n  border-radius: 4px;\n  padding: 10px;\n  margin: 30px 0;\n  \n`\n\nexport default observer(({children}) => {\n  // eslint-disable-next-line no-unused-vars\n  const {UserStore} = useStores()\n\n  return (\n    <>\n      {UserStore.currentUser ? null : <Tips>{children}</Tips>}\n    </>\n  )\n})","import React from 'react'\nimport {observer} from 'mobx-react'\nimport {useStores} from '../stores'\nimport Uploader from '../components/Uploader'\nimport Tips from '../components/Tips'\n\nexport default observer(() => {\n  const {UserStore} = useStores()\n  const User = () => <>Hello~{UserStore.currentUser.attributes.username}</>\n  return (\n    <>\n      <Tips>请先登陆在上传</Tips>\n      <Uploader />\n    </>\n  )\n}\n)\n\n\n\n"]}}