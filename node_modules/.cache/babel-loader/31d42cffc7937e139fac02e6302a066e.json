{"ast":null,"code":"import _objectSpread from\"/Users/marshall/Desktop/epic-react/epic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _taggedTemplateLiteral from\"/Users/marshall/Desktop/epic-react/epic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useEffect}from'react';import{observer}from'mobx-react';import{useStores}from'../stores';import InfiniteScroll from'react-infinite-scroller';import{List,Spin}from'antd';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Img=styled.img(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100px;\\n  height: 120px;\\n  object-fit: contain;\\n  border: 1px solid #eee;\\n\"])));export default observer(function(){var _useStores=useStores(),HistoryStore=_useStores.HistoryStore;var loadMore=function loadMore(){HistoryStore.find();};useEffect(function(){console.log('进入组件时执行');return function(){console.log('卸载');HistoryStore.reset();};},[]);var options={initialLoad:true,pageStart:0,loadMore:loadMore,hasMore:!HistoryStore.isLoading&&HistoryStore.hasMore,useWindow:true};return/*#__PURE__*/_jsxs(InfiniteScroll,_objectSpread(_objectSpread({},options),{},{children:[/*#__PURE__*/_jsx(List,{dataSource:HistoryStore.list,renderItem:function renderItem(item){return/*#__PURE__*/_jsxs(List.Item,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Img,{src:item.attributes.url.attributes.url})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h5\",{children:item.attributes.filename})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:item.attributes.url.attributes.url,children:item.attributes.url.attributes.url})})]},item.id);},children:HistoryStore.isLoading&&HistoryStore.hasMore&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Spin,{tips:'加载中...'})})}),HistoryStore.isLoading&&HistoryStore]}));});","map":{"version":3,"sources":["/Users/marshall/Desktop/epic-react/epic/src/components/List.js"],"names":["React","useEffect","observer","useStores","InfiniteScroll","List","Spin","styled","Img","img","HistoryStore","loadMore","find","console","log","reset","options","initialLoad","pageStart","hasMore","isLoading","useWindow","list","item","attributes","url","filename","id"],"mappings":"+VAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,QAAR,KAAuB,YAAvB,CACA,OAAQC,SAAR,KAAwB,WAAxB,CACA,MAAOC,CAAAA,cAAP,KAA2B,yBAA3B,CACA,OAAQC,IAAR,CAAcC,IAAd,KAAyB,MAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,C,wFAEA,GAAMC,CAAAA,GAAG,CAAGD,MAAM,CAACE,GAAV,yJAAT,CAOA,cAAeP,CAAAA,QAAQ,CAAC,UAAM,CAC5B,eAAuBC,SAAS,EAAhC,CAAOO,YAAP,YAAOA,YAAP,CACA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrBD,YAAY,CAACE,IAAb,GACD,CAFD,CAIAX,SAAS,CAAC,UAAM,CACdY,OAAO,CAACC,GAAR,CAAY,SAAZ,EACA,MAAO,WAAM,CACXD,OAAO,CAACC,GAAR,CAAY,IAAZ,EACAJ,YAAY,CAACK,KAAb,GACD,CAHD,CAID,CANQ,CAMN,EANM,CAAT,CAOA,GAAMC,CAAAA,OAAO,CAAG,CACdC,WAAW,CAAE,IADC,CAEdC,SAAS,CAAE,CAFG,CAGdP,QAAQ,CAAEA,QAHI,CAIdQ,OAAO,CAAE,CAACT,YAAY,CAACU,SAAd,EAA2BV,YAAY,CAACS,OAJnC,CAKdE,SAAS,CAAE,IALG,CAAhB,CAQA,mBACE,MAAC,cAAD,gCAAoBL,OAApB,6BACE,KAAC,IAAD,EAAM,UAAU,CAAEN,YAAY,CAACY,IAA/B,CACM,UAAU,CACR,oBAAAC,IAAI,qBAAK,MAAC,IAAD,CAAM,IAAN,yBACP,kCACE,KAAC,GAAD,EAAK,GAAG,CAAEA,IAAI,CAACC,UAAL,CAAgBC,GAAhB,CAAoBD,UAApB,CAA+BC,GAAzC,EADF,EADO,cAIP,kCACE,oBAAKF,IAAI,CAACC,UAAL,CAAgBE,QAArB,EADF,EAJO,cAOP,kCACE,UAAG,MAAM,CAAC,QAAV,CAAmB,IAAI,CAAEH,IAAI,CAACC,UAAL,CAAgBC,GAAhB,CAAoBD,UAApB,CAA+BC,GAAxD,UAA8DF,IAAI,CAACC,UAAL,CAAgBC,GAAhB,CAAoBD,UAApB,CAA+BC,GAA7F,EADF,EAPO,GAAgBF,IAAI,CAACI,EAArB,CAAL,EAFZ,UAcGjB,YAAY,CAACU,SAAb,EAA0BV,YAAY,CAACS,OAAvC,eACC,kCACE,KAAC,IAAD,EAAM,IAAI,CAAE,QAAZ,EADF,EAfJ,EADF,CAqBGT,YAAY,CAACU,SAAb,EAA0BV,YArB7B,IADF,CAyBD,CA9CsB,CAAvB","sourcesContent":["import React, {useEffect} from 'react'\nimport {observer} from 'mobx-react'\nimport {useStores} from '../stores'\nimport InfiniteScroll from 'react-infinite-scroller'\nimport {List, Spin} from 'antd'\nimport styled from 'styled-components'\n\nconst Img = styled.img`\n  width: 100px;\n  height: 120px;\n  object-fit: contain;\n  border: 1px solid #eee;\n`\n\nexport default observer(() => {\n  const {HistoryStore} = useStores()\n  const loadMore = () => {\n    HistoryStore.find()\n  }\n\n  useEffect(() => {\n    console.log('进入组件时执行')\n    return () => {\n      console.log('卸载')\n      HistoryStore.reset()\n    }\n  }, [])\n  const options = {\n    initialLoad: true,\n    pageStart: 0,\n    loadMore: loadMore,\n    hasMore: !HistoryStore.isLoading && HistoryStore.hasMore,\n    useWindow: true\n  }\n\n  return (\n    <InfiniteScroll {...options}>\n      <List dataSource={HistoryStore.list}\n            renderItem={\n              item => (<List.Item key={item.id}>\n                <div>\n                  <Img src={item.attributes.url.attributes.url}/>\n                </div>\n                <div>\n                  <h5>{item.attributes.filename}</h5>\n                </div>\n                <div>\n                  <a target=\"_blank\" href={item.attributes.url.attributes.url}>{item.attributes.url.attributes.url}</a>\n                </div>\n              </List.Item>)\n            }>\n        {HistoryStore.isLoading && HistoryStore.hasMore && (\n          <div>\n            <Spin tips={'加载中...'}/>\n          </div>\n        )}\n      </List>\n      {HistoryStore.isLoading && HistoryStore}\n    </InfiniteScroll>\n  )\n})"]},"metadata":{},"sourceType":"module"}