{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/marshall/Desktop/epic-react/epic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import{Form,Input,Button,Checkbox}from'antd';import React from'react';import styled from'styled-components';import{useStores}from'../stores';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 600px;\\n  margin: 30px auto;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\\n  border-radius: 4px;\\n  padding: 20px;\\n\"],[\"\\n  max-width: 600px;\\n  margin: 30px auto;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2\\\\);\\n  border-radius: 4px;\\n  padding: 20px;\\n\"])));var Title=styled.h1(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  margin-bottom: 30px;\\n\"])));var Component=function Component(){var _useStores=useStores(),AuthStore=_useStores.AuthStore;var history=useHistory();var onFinish=function onFinish(values){console.log('Success:',values);AuthStore.setUsername(values.username);AuthStore.setPassword(values.password);AuthStore.login().then(function(){console.log('登陆成功, 跳转到首页');history.push('/');}).catch(function(){console.log('登录失败，什么都不做');});};var onFinishFailed=function onFinishFailed(errorInfo){console.log('Failed:',errorInfo);};var validateUsername=function validateUsername(rule,value){if(/\\W/.test(value))return Promise.reject('不能出现字母数字下划线以外的字符');if(value.length<4||value.length>10)return Promise.reject('用户名长度要在4～10个字符之间');return Promise.resolve();};// 箭头函数后加()是因为返回了一个对象，不加会被理解为函数体\nreturn/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"\\u767B\\u9646\"}),/*#__PURE__*/_jsxs(Form,{name:\"basic\",labelCol:{span:6},wrapperCol:{span:18},initialValues:{remember:true},onFinish:onFinish,onFinishFailed:onFinishFailed,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\\u7528\\u6237\\u540D\",name:\"username\",rules:[{required:true,message:'请输入用户名'},{validator:validateUsername}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u5BC6\\u7801\",name:\"password\",rules:[{required:true,message:'请输入密码'},{min:4,message:'密码最少4位数'},{max:10,message:'密码最多十位数'}],children:/*#__PURE__*/_jsx(Input.Password,{})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:6,span:18},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"\\u63D0\\u4EA4\"})})]})]});};export default Component;","map":{"version":3,"sources":["/Users/marshall/Desktop/epic-react/epic/src/pages/Login.js"],"names":["Form","Input","Button","Checkbox","React","styled","useStores","useHistory","Wrapper","div","Title","h1","Component","AuthStore","history","onFinish","values","console","log","setUsername","username","setPassword","password","login","then","push","catch","onFinishFailed","errorInfo","validateUsername","rule","value","test","Promise","reject","length","resolve","span","remember","required","message","validator","min","max","offset"],"mappings":"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","sourcesContent":["import {Form, Input, Button, Checkbox} from 'antd'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {useStores} from '../stores'\nimport {useHistory} from 'react-router-dom'\n\nconst Wrapper = styled.div`\n  max-width: 600px;\n  margin: 30px auto;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2\\);\n  border-radius: 4px;\n  padding: 20px;\n`\nconst Title = styled.h1`\n  text-align: center;\n  margin-bottom: 30px;\n`\n\nconst Component = () => {\n\n  const {AuthStore} = useStores()\n  const history = useHistory()\n  const onFinish = (values) => {\n    console.log('Success:', values)\n    AuthStore.setUsername(values.username)\n    AuthStore.setPassword(values.password)\n    AuthStore.login()\n      .then(() => {\n        console.log('登陆成功, 跳转到首页')\n        history.push('/')\n      }).catch(() => {\n      console.log('登录失败，什么都不做')\n    })\n  }\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo)\n  }\n\n\n  const validateUsername = (rule, value) => {\n    if (/\\W/.test(value)) return Promise.reject('不能出现字母数字下划线以外的字符')\n    if (value.length < 4 || value.length > 10) return Promise.reject('用户名长度要在4～10个字符之间')\n    return Promise.resolve()\n  }\n  // 箭头函数后加()是因为返回了一个对象，不加会被理解为函数体\n\n  return (\n    <Wrapper>\n      <Title>登陆</Title>\n      <Form\n        name=\"basic\"\n        labelCol={{\n          span: 6,\n        }}\n        wrapperCol={{\n          span: 18,\n        }}\n        initialValues={{\n          remember: true,\n        }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n      >\n        <Form.Item\n          label=\"用户名\"\n          name=\"username\"\n          rules={[\n            {\n              required: true,\n              message: '请输入用户名',\n            }, {\n              validator: validateUsername\n            }\n          ]}\n        >\n          <Input/>\n        </Form.Item>\n        <Form.Item\n          label=\"密码\"\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: '请输入密码',\n            }, {\n              min: 4,\n              message: '密码最少4位数'\n            }, {\n              max: 10,\n              message: '密码最多十位数'\n            }\n          ]}\n        >\n          <Input.Password/>\n        </Form.Item>\n\n        <Form.Item\n          wrapperCol={{\n            offset: 6,\n            span: 18,\n          }}\n        >\n          <Button type=\"primary\" htmlType=\"submit\">\n            提交\n          </Button>\n        </Form.Item>\n      </Form>\n    </Wrapper>\n  )\n}\n\nexport default Component"]},"metadata":{},"sourceType":"module"}