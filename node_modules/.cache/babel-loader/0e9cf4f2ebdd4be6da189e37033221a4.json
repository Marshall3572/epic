{"ast":null,"code":"var _jsxFileName = \"/Users/marshall/Desktop/epic-react/epic/src/pages/Register.js\",\n    _s = $RefreshSig$();\n\nimport { Form, Input, Button } from 'antd';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { useStores } from '../stores';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Wrapper = styled.div`\n  max-width: 600px;\n  margin: 30px auto;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2\\);\n  border-radius: 4px;\n  padding: 20px;\n`;\n_c = Wrapper;\nconst Title = styled.h1`\n  text-align: center;\n  margin-bottom: 30px;\n`;\n_c2 = Title;\n\nconst Component = () => {\n  _s();\n\n  const {\n    AuthStore\n  } = useStores();\n  const history = useHistory();\n\n  const onFinish = values => {\n    console.log('Success:', values);\n    AuthStore.setUsername(values.username);\n    AuthStore.setPassword(values.password);\n    AuthStore.register().then(() => {\n      console.log('注册成功, 跳转到首页');\n      history.push('/');\n    }).catch(() => {\n      console.log('注册失败，什么都不做');\n    });\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const validateUsername = (rule, value) => {\n    if (/\\W/.test(value)) return Promise.reject('不能出现字母数字下划线以外的字符');\n    if (value.length < 3) return Promise.reject('用户名长度不能小于3');\n    if (value.length > 10) return Promise.reject('用户名长度不能大于10');\n    return Promise.resolve();\n  }; // 箭头函数后加()是因为返回了一个对象，不加会被理解为函数体\n\n\n  const validateConform = ({\n    getFieldValue\n  }) => ({\n    validator(rule, value) {\n      if (getFieldValue('password') === value) return Promise.resolve();\n      return Promise.reject('两次密码不一致');\n    }\n\n  });\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: \"\\u6CE8\\u518C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      name: \"basic\",\n      labelCol: {\n        span: 6\n      },\n      wrapperCol: {\n        span: 18\n      },\n      initialValues: {\n        remember: true\n      },\n      onFinish: onFinish,\n      onFinishFailed: onFinishFailed,\n      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"\\u7528\\u6237\\u540D\",\n        name: \"username\",\n        rules: [{\n          required: true,\n          message: '请输入用户名'\n        }, {\n          validator: validateUsername\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"\\u5BC6\\u7801\",\n        name: \"password\",\n        rules: [{\n          required: true,\n          message: '请输入密码'\n        }, {\n          min: 4,\n          message: '密码最少4位数'\n        }, {\n          max: 10,\n          message: '密码最多十位数'\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input.Password, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"\\u786E\\u8BA4\\u5BC6\\u7801\",\n        name: \"confirmPassword\",\n        rules: [{\n          required: true,\n          message: '请再次确认密码'\n        }, validateConform],\n        children: /*#__PURE__*/_jsxDEV(Input.Password, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        wrapperCol: {\n          offset: 6,\n          span: 18\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          children: \"\\u63D0\\u4EA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Component, \"ZnorVE+tzMZwCJfdLLaLJfmZhHI=\", false, function () {\n  return [useStores, useHistory];\n});\n\n_c3 = Component;\nexport default Component;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"Component\");","map":{"version":3,"sources":["/Users/marshall/Desktop/epic-react/epic/src/pages/Register.js"],"names":["Form","Input","Button","React","styled","useStores","useHistory","Wrapper","div","Title","h1","Component","AuthStore","history","onFinish","values","console","log","setUsername","username","setPassword","password","register","then","push","catch","onFinishFailed","errorInfo","validateUsername","rule","value","test","Promise","reject","length","resolve","validateConform","getFieldValue","validator","span","remember","required","message","min","max","offset"],"mappings":"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","sourcesContent":["import {Form, Input, Button} from 'antd'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {useStores} from '../stores'\nimport {useHistory} from 'react-router-dom'\n\nconst Wrapper = styled.div`\n  max-width: 600px;\n  margin: 30px auto;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2\\);\n  border-radius: 4px;\n  padding: 20px;\n`\nconst Title = styled.h1`\n  text-align: center;\n  margin-bottom: 30px;\n`\n\nconst Component = () => {\n\n  const { AuthStore } = useStores();\n  const history = useHistory()\n\n  const onFinish = values => {\n    console.log('Success:', values);\n    AuthStore.setUsername(values.username);\n    AuthStore.setPassword(values.password);\n    AuthStore.register()\n      .then(() => {\n        console.log('注册成功, 跳转到首页')\n        history.push('/')\n      }).catch(() => {\n      console.log('注册失败，什么都不做')\n    });\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo)\n  }\n\n  const validateUsername = (rule, value) => {\n    if (/\\W/.test(value)) return Promise.reject('不能出现字母数字下划线以外的字符')\n    if (value.length < 3) return Promise.reject('用户名长度不能小于3')\n    if (value.length > 10) return Promise.reject('用户名长度不能大于10')\n    return Promise.resolve();\n  }\n\n  // 箭头函数后加()是因为返回了一个对象，不加会被理解为函数体\n  const validateConform = ({getFieldValue}) => ({\n    validator(rule, value) {\n      if (getFieldValue('password') === value)\n        return Promise.resolve()\n      return Promise.reject('两次密码不一致')\n    }\n  })\n\n  return (\n    <Wrapper>\n      <Title>注册</Title>\n      <Form\n        name=\"basic\"\n        labelCol={{\n          span: 6,\n        }}\n        wrapperCol={{\n          span: 18,\n        }}\n        initialValues={{\n          remember: true,\n        }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n      >\n        <Form.Item\n          label=\"用户名\"\n          name=\"username\"\n          rules={[\n            {\n              required: true,\n              message: '请输入用户名',\n            }, {\n              validator: validateUsername\n            }\n          ]}\n        >\n          <Input/>\n        </Form.Item>\n        <Form.Item\n          label=\"密码\"\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: '请输入密码',\n            }, {\n              min: 4,\n              message: '密码最少4位数'\n            }, {\n              max: 10,\n              message: '密码最多十位数'\n            }\n          ]}\n        >\n          <Input.Password/>\n        </Form.Item>\n\n        <Form.Item\n          label=\"确认密码\"\n          name=\"confirmPassword\"\n          rules={[\n            {\n              required: true,\n              message: '请再次确认密码',\n            },\n            validateConform\n          ]}\n        >\n          <Input.Password/>\n        </Form.Item>\n\n        <Form.Item\n          wrapperCol={{\n            offset: 6,\n            span: 18,\n          }}\n        >\n          <Button type=\"primary\" htmlType=\"submit\">\n            提交\n          </Button>\n        </Form.Item>\n      </Form>\n    </Wrapper>\n  )\n}\n\nexport default Component"]},"metadata":{},"sourceType":"module"}