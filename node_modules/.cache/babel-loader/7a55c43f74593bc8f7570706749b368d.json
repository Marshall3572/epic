{"ast":null,"code":"import _initializerDefineProperty from\"/Users/marshall/Desktop/epic-react/epic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";import _classCallCheck from\"/Users/marshall/Desktop/epic-react/epic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/marshall/Desktop/epic-react/epic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _applyDecoratedDescriptor from\"/Users/marshall/Desktop/epic-react/epic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";import _initializerWarningHelper from\"/Users/marshall/Desktop/epic-react/epic/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";var _class,_descriptor,_descriptor2,_descriptor3,_descriptor4;import React from'react';import{Uploader}from'../models';import{message}from'antd';import{action,observable}from'mobx';var HistoryStore=(_class=/*#__PURE__*/function(){function HistoryStore(){_classCallCheck(this,HistoryStore);_initializerDefineProperty(this,\"list\",_descriptor,this);_initializerDefineProperty(this,\"isLoading\",_descriptor2,this);_initializerDefineProperty(this,\"hasMore\",_descriptor3,this);_initializerDefineProperty(this,\"page\",_descriptor4,this);this.limit=10;}_createClass(HistoryStore,[{key:\"append\",value:function append(newList){this.list=this.list.concat(newList);}},{key:\"find\",value:function find(){var _this=this;this.isLoading=true;Uploader.find({page:this.page,limit:this.limit}).then(function(newList){_this.append(newList);if(newList.length<_this.limit){_this.hasMore=false;}}).catch(function(err){return message.error('加载数据失败');}).finally(function(){_this.isLoading=false;});}},{key:\"reset\",value:function reset(){this.list=[];this.isLoading=false;this.hasMore=true;this.page=0;}}]);return HistoryStore;}(),(_descriptor=_applyDecoratedDescriptor(_class.prototype,\"list\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return[];}}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,\"isLoading\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return false;}}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,\"hasMore\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return true;}}),_descriptor4=_applyDecoratedDescriptor(_class.prototype,\"page\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return 0;}}),_applyDecoratedDescriptor(_class.prototype,\"append\",[action],Object.getOwnPropertyDescriptor(_class.prototype,\"append\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"find\",[action],Object.getOwnPropertyDescriptor(_class.prototype,\"find\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"reset\",[action],Object.getOwnPropertyDescriptor(_class.prototype,\"reset\"),_class.prototype)),_class);export default new HistoryStore();","map":{"version":3,"sources":["/Users/marshall/Desktop/epic-react/epic/src/stores/history.js"],"names":["React","Uploader","message","action","observable","HistoryStore","limit","newList","list","concat","isLoading","find","page","then","append","length","hasMore","catch","err","error","finally"],"mappings":"s5BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,WAAvB,CACA,OAAQC,OAAR,KAAsB,MAAtB,CACA,OAAQC,MAAR,CAAgBC,UAAhB,KAAiC,MAAjC,C,GAEMC,CAAAA,Y,gVAKJC,K,CAAQ,E,iDAER,gBAAeC,OAAf,CAAwB,CACtB,KAAKC,IAAL,CAAY,KAAKA,IAAL,CAAUC,MAAV,CAAiBF,OAAjB,CAAZ,CACD,C,oBAED,eAAe,gBACb,KAAKG,SAAL,CAAiB,IAAjB,CACAT,QAAQ,CAACU,IAAT,CAAc,CAACC,IAAI,CAAE,KAAKA,IAAZ,CAAkBN,KAAK,CAAE,KAAKA,KAA9B,CAAd,EACGO,IADH,CACQ,SAAAN,OAAO,CAAI,CACf,KAAI,CAACO,MAAL,CAAYP,OAAZ,EACA,GAAIA,OAAO,CAACQ,MAAR,CAAiB,KAAI,CAACT,KAA1B,CAAiC,CAC/B,KAAI,CAACU,OAAL,CAAe,KAAf,CACD,CACF,CANH,EAOGC,KAPH,CAOS,SAAAC,GAAG,QAAIhB,CAAAA,OAAO,CAACiB,KAAR,CAAc,QAAd,CAAJ,EAPZ,EAQGC,OARH,CAQW,UAAM,CACb,KAAI,CAACV,SAAL,CAAiB,KAAjB,CACD,CAVH,EAWD,C,qBAED,gBAAgB,CACd,KAAKF,IAAL,CAAY,EAAZ,CACA,KAAKE,SAAL,CAAiB,KAAjB,CACA,KAAKM,OAAL,CAAe,IAAf,CACA,KAAKJ,IAAL,CAAY,CAAZ,CACD,C,4FA9BAR,U,4FAAkB,E,0EAClBA,U,4FAAuB,M,wEACvBA,U,4FAAqB,K,qEACrBA,U,4FAAkB,E,0DAGlBD,M,kIAIAA,M,iIAeAA,M,uFAQH,cAAe,IAAIE,CAAAA,YAAJ,EAAf","sourcesContent":["import React from 'react'\nimport {Uploader} from '../models'\nimport {message} from 'antd'\nimport {action, observable} from 'mobx'\n\nclass HistoryStore {\n  @observable list = []\n  @observable isLoading = false\n  @observable hasMore = true\n  @observable page = 0\n  limit = 10\n\n  @action append(newList) {\n    this.list = this.list.concat(newList)\n  }\n\n  @action find() {\n    this.isLoading = true\n    Uploader.find({page: this.page, limit: this.limit})\n      .then(newList => {\n        this.append(newList)\n        if (newList.length < this.limit) {\n          this.hasMore = false\n        }\n      })\n      .catch(err => message.error('加载数据失败'))\n      .finally(() => {\n        this.isLoading = false\n      })\n  }\n\n  @action reset() {\n    this.list = []\n    this.isLoading = false\n    this.hasMore = true\n    this.page = 0\n  }\n}\n\nexport default new HistoryStore()\n"]},"metadata":{},"sourceType":"module"}